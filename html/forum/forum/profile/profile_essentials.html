{% extends base_template %}

{% load i18n %}
{% load bootstrap %}

{% block extra_meta %}
  <link href="{{STATIC_URL}}css/datepicker.css" rel="stylesheet" />
{% endblock %}

{% block main %}

<div class="panel-group" id="accordion">
<div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapseEssentials"><span id="collapseEssentials-icon" class="glyphicon glyphicon-chevron-{{essentials_chevron}}"></span> {% trans 'Essential Information' %}</a></h3>
  </div>
  <div id="collapseEssentials" class="panel-collapse collapse {{essentials_in}}">
    <div class="panel-body">
      {% include 'form.html' with form=form_essentials button='Save' name='essentials' %}   
    </div>
  </div>
</div>

<div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapseBio"><span id="collapseBio-icon" class="glyphicon glyphicon-chevron-{{bio_chevron}}"></span> {% trans 'Bio' %}</a></h3>
  </div>
  <div id="collapseBio" class="panel-collapse collapse {{bio_in}}">
    <div class="panel-body">
      {% include 'form.html' with form=form_bio button='Save' name='bio' %}
    </div>
  </div>
</div>

<div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapsePersonal"><span id="collapsePersonal-icon" class="glyphicon glyphicon-chevron-{{personal_chevron}}"></span> {% trans 'Personal Information' %}</a></h3>
  </div>
  <div id="collapsePersonal" class="panel-collapse collapse {{personal_in}}">
    <div class="panel-body">
      <p>
      {% blocktrans %}
      None of the information entered here is public. It's used only to find the best matches for you when using the search feature of the site.
      {% endblocktrans %}
      </p>
      {% include 'form.html' with form=form_personal button='Save' name='personal' %}
    </div>
  </div>
</div>

<div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapseAct"><span id="collapseAct-icon" class="glyphicon glyphicon-chevron-{{act_chevron}}"></span> {% trans 'Activities' %}</a></h3>
  </div>
  <div id="collapseAct" class="panel-collapse collapse {{act_in}}">
    <div class="panel-body">
      <form action="{{action}}" class="form" method="POST" >
        {% csrf_token %}
        {% include 'forum/profile/form_activities_fields.html' with form=form_act %}
        <div class="form-group">
          <div class="col-sm-9">
            <button type="submit" class="btn btn-primary" name="act">{% trans 'Save' %}</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
<div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapsePasswordchange"><span id="collapsePasswordchange-icon" class="glyphicon glyphicon-chevron-{{passwordchange_chevron}}"></span> {% trans 'Change Password' %}</a></h3>
  </div>
  <div id="collapsePasswordchange" class="panel-collapse collapse {{passwordchange_in}}">
    <div class="panel-body">
      {% include 'form.html' with form=form_passwordchange button='Save' name='passwordchange' %}
    </div>
  </div>
</div>

</div>

{% endblock %}

{% block extra_script %}
  <script src="{{STATIC_URL}}js/bootstrap-datepicker.js"></script>
  <script src="{{STATIC_URL}}js/collapse.js"></script>

  <script type="text/javascript" language="javascript">
    $('#id_date_of_birth').datepicker({
      format: 'dd.mm.yyyy'
    });

    $('#accordion .panel-collapse').on('show.bs.collapse', function () {
      $(this).prev().find(".glyphicon").removeClass("glyphicon-chevron-right").addClass("glyphicon-chevron-down");
    });

    //The reverse of the above on hidden event:

    $('#accordion .panel-collapse').on('hidden.bs.collapse', function () {
      $(this).prev().find(".glyphicon").removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-right");
    });

  </script>

{% endblock %}
